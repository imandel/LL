<!DOCTYPE html>
<html>
<head>
	<h1>Hello World</h1>
	<meta charset="utf-8" />
	<title>Draw a rectangle!</title>
</head>
<body>
<div id="filesubmit">
  <input type="file" class="file-select" accept="image/*"/>
  <button class="file-submit">SUBMIT</button>
</div>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-storage.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyCT3EDBWfF7PVjI2xtBoP4ggZkBbSGWYcU",
    authDomain: "ll-art.firebaseapp.com",
    databaseURL: "https://ll-art.firebaseio.com",
    projectId: "ll-art",
    storageBucket: "ll-art.appspot.com",
    messagingSenderId: "612626647296",
    appId: "1:612626647296:web:3f162a78dd7864e3638be5"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const storageService = firebase.storage();
  const storageRef = storageService.ref();
  
  document.querySelector('.file-select').addEventListener('change', handleFileUploadChange);
  document.querySelector('.file-submit').addEventListener('click', handleFileUploadSubmit);
  
  let selectedFile;
  function handleFileUploadChange(e) {
  selectedFile = e.target.files[0];
}

function handleFileUploadSubmit(e) {
  const uploadTask = storageRef.child(`images/${selectedFile.name}`).put(selectedFile); //create a child directory called images, and place the file inside this directory
  uploadTask.on('state_changed', (snapshot) => {
  // Observe state change events such as progress, pause, and resume
  }, (error) => {
    // Handle unsuccessful uploads
    console.log(error);
  }, () => {
     // Do something once upload is complete
     console.log('success');
     window.alert('test');
  });
}
</script>
</body>
</html>
